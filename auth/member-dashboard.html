<!DOCTYPE html>
<html lang="en">

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Member Dashboard | Soulamore</title>
    <link
        href="https://fonts.googleapis.com/css2?family=Outfit:wght@300;400;600;700&family=Plus+Jakarta+Sans:wght@300;400;500;600&display=swap"
        rel="stylesheet">
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css">
    <link rel="stylesheet" href="../assets/css/global.css">

    <style>
        /* --- THEME: MIDNIGHT VEGITO (For Members) --- */
        :root {
            --deep-space: #0f172a;
            --navy-glass: rgba(30, 41, 59, 0.9);
            --starlight: #f1f5f9;
            --peach-glow: #F49F75;
            --teal-glow: #4ECDC4;
            --gold-glow: #fbbf24;
            --border-glass: rgba(255, 255, 255, 0.1);
        }

        body {
            font-family: 'Plus Jakarta Sans', sans-serif;
            background-color: var(--deep-space);
            color: var(--starlight);
            margin: 0;
            overflow: hidden;
            /* App-like feel */
        }

        #dashboard-container {
            display: flex;
            height: 100vh;
        }

        /* --- SIDEBAR --- */
        .sidebar {
            width: 260px;
            background: rgba(15, 23, 42, 0.95);
            border-right: 1px solid var(--border-glass);
            display: flex;
            flex-direction: column;
            padding: 30px 20px;
            backdrop-filter: blur(10px);
            z-index: 10;
        }

        .logo-area {
            margin-bottom: 50px;
            display: flex;
            align-items: center;
        }

        .logo-img {
            height: 35px;
            width: auto;
        }

        .nav-item {
            padding: 12px 15px;
            margin-bottom: 8px;
            border-radius: 12px;
            color: rgba(255, 255, 255, 0.6);
            cursor: pointer;
            transition: 0.3s;
            display: flex;
            align-items: center;
            gap: 12px;
            font-size: 0.95rem;
            text-decoration: none;
        }

        .nav-item:hover,
        .nav-item.active {
            background: rgba(255, 255, 255, 0.05);
            color: var(--teal-glow);
        }

        .nav-item i {
            width: 20px;
            text-align: center;
        }

        .user-mini {
            margin-top: auto;
            border-top: 1px solid var(--border-glass);
            padding-top: 20px;
            display: flex;
            align-items: center;
            gap: 12px;
        }

        .user-avatar {
            width: 40px;
            height: 40px;
            border-radius: 50%;
            background: var(--teal-glow);
            color: var(--deep-space);
            display: flex;
            align-items: center;
            justify-content: center;
            font-weight: 700;
        }

        /* --- MAIN CONTENT --- */
        .main-content {
            flex: 1;
            padding: 40px;
            overflow-y: auto;
            position: relative;
        }

        /* Particles Background Layer */
        #particles {
            position: absolute;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            z-index: 0;
            pointer-events: none;
        }

        .content-inner {
            position: relative;
            z-index: 2;
            max-width: 1000px;
            margin: 0 auto;
        }

        .header-welcome {
            margin-bottom: 40px;
        }

        .header-welcome h1 {
            font-size: 2.2rem;
            font-family: 'Outfit', sans-serif;
            margin-bottom: 5px;
        }

        .date-display {
            opacity: 0.6;
            font-size: 0.9rem;
        }

        /* --- TAB CONTENT PANELS --- */
        .tab-panel {
            display: none;
            animation: fadeIn 0.4s ease-out;
        }

        .tab-panel.active {
            display: block;
        }

        @keyframes fadeIn {
            from {
                opacity: 0;
                transform: translateY(10px);
            }

            to {
                opacity: 1;
                transform: translateY(0);
            }
        }

        /* --- DASHBOARD WIDGETS (HOME) --- */
        .grid-dashboard {
            display: grid;
            grid-template-columns: 2fr 1fr;
            gap: 25px;
        }

        .card {
            background: var(--navy-glass);
            border: 1px solid var(--border-glass);
            border-radius: 20px;
            padding: 25px;
            margin-bottom: 25px;
        }

        .card-header {
            display: flex;
            justify-content: space-between;
            align-items: center;
            margin-bottom: 20px;
        }

        .card-title {
            font-family: 'Outfit', sans-serif;
            font-size: 1.2rem;
            color: var(--starlight);
        }

        /* Bookings Table */
        .booking-item {
            display: flex;
            align-items: center;
            padding: 15px;
            border-bottom: 1px solid var(--border-glass);
            transition: 0.2s;
        }

        .booking-item:last-child {
            border-bottom: none;
        }

        .booking-item:hover {
            background: rgba(255, 255, 255, 0.02);
        }

        .b-date {
            width: 60px;
            text-align: center;
            background: rgba(255, 255, 255, 0.05);
            border-radius: 10px;
            padding: 8px 5px;
            margin-right: 15px;
        }

        .b-day {
            font-size: 1.2rem;
            font-weight: 700;
            display: block;
        }

        .b-month {
            font-size: 0.75rem;
            text-transform: uppercase;
            opacity: 0.8;
        }

        .b-info {
            flex: 1;
        }

        .b-name {
            font-weight: 600;
            margin-bottom: 3px;
        }

        .b-type {
            font-size: 0.85rem;
            opacity: 0.7;
        }

        .b-action {
            padding: 6px 15px;
            border-radius: 50px;
            font-size: 0.8rem;
            background: var(--teal-glow);
            color: var(--deep-space);
            text-decoration: none;
            font-weight: 600;
        }

        .b-action.secondary {
            background: transparent;
            border: 1px solid var(--border-glass);
            color: var(--starlight);
        }

        /* Quick Tools Grid */
        .tools-grid {
            display: grid;
            grid-template-columns: repeat(2, 1fr);
            gap: 15px;
        }

        .tool-btn {
            background: rgba(255, 255, 255, 0.03);
            border: 1px solid var(--border-glass);
            padding: 20px;
            border-radius: 15px;
            text-align: center;
            cursor: pointer;
            transition: 0.3s;
            text-decoration: none;
            color: var(--starlight);
            display: block;
        }

        .tool-btn:hover {
            background: rgba(255, 255, 255, 0.08);
            border-color: var(--teal-glow);
            transform: translateY(-3px);
        }

        .tool-icon {
            font-size: 1.5rem;
            margin-bottom: 10px;
            color: var(--peach-glow);
        }

        /* --- CALENDAR PLACEHOLDER --- */
        .calendar-placeholder {
            height: 500px;
            background: rgba(0, 0, 0, 0.2);
            border: 2px dashed var(--border-glass);
            border-radius: 20px;
            display: flex;
            flex-direction: column;
            align-items: center;
            justify-content: center;
            color: rgba(255, 255, 255, 0.4);
        }

        .spin {
            animation: spin 3s linear infinite;
            font-size: 2rem;
            margin-bottom: 15px;
        }

        @keyframes spin {
            100% {
                transform: rotate(360deg);
            }
        }

        /* --- JOURNAL PLACEHOLDER --- */
        .journal-empty {
            text-align: center;
            padding: 80px 0;
            color: rgba(255, 255, 255, 0.5);
        }

        @media (max-width: 900px) {
            .grid-dashboard {
                grid-template-columns: 1fr;
            }

            .sidebar {
                width: 80px;
                padding: 20px 10px;
                align-items: center;
            }

            .nav-item span,
            .logo-area span,
            .user-mini span {
                display: none;
            }

            .nav-item {
                justify-content: center;
                width: 50px;
                height: 50px;
                padding: 0;
            }

            .logo-area {
                margin-bottom: 30px;
                font-size: 1.2rem;
            }
        }
    </style>
</head>

<body>

    <div id="dashboard-container">
        <!-- SIDEBAR -->
        <div class="sidebar">
            <div class="logo-area">
                <img src="../assets/images/logo.png" alt="Soulamore" class="logo-img">
            </div>

            <a href="#" class="nav-item active" onclick="switchTab('home')">
                <i class="fas fa-home"></i> <span>Overview</span>
            </a>
            <a href="#" class="nav-item" onclick="switchTab('bookings')">
                <i class="fas fa-calendar-alt"></i> <span>My Bookings</span>
            </a>
            <a href="#" class="nav-item" onclick="switchTab('calendar')">
                <i class="fas fa-calendar-week"></i> <span>Calendar</span>
            </a>
            <a href="#" class="nav-item" onclick="switchTab('soulbot')">
                <i class="fas fa-robot"></i> <span>SoulBot AI</span>
            </a>
            <a href="#" class="nav-item" onclick="switchTab('journal')">
                <i class="fas fa-book-open"></i> <span>Journal</span>
            </a>

            <div class="user-mini">
                <div class="user-avatar" id="navAvatar">U</div>
                <span id="navName">User</span>
                <a href="../index.html" style="margin-left:auto; color:rgba(255,255,255,0.4);"><i
                        class="fas fa-sign-out-alt"></i></a>
            </div>
        </div>

        <!-- MAIN CONTENT -->
        <div class="main-content">
            <div id="particles"></div>

            <div class="content-inner">

                <!-- HEADER -->
                <div class="header-welcome fade-in">
                    <h1 id="welcomeMsg">Good Morning, User</h1>
                    <div class="date-display" id="dateDisplay">Monday, October 24</div>
                </div>

                <!-- 1. HOME TAB -->
                <div id="tab-home" class="tab-panel active">
                    <div class="grid-dashboard">
                        <!-- Left Col -->
                        <div>
                            <!-- Next Session Card -->
                            <div class="card fade-in">
                                <div class="card-header">
                                    <span class="card-title">Next Session</span>
                                    <span style="font-size:0.8rem; opacity:0.6;">Starts in 2 hours</span>
                                </div>
                                <div style="display:flex; gap:20px; align-items:center;">
                                    <div
                                        style="background:var(--navy-glass); padding:15px; border-radius:12px; text-align:center; min-width:80px;">
                                        <div style="font-size:1.5rem; font-weight:700; color:var(--teal-glow);">14:00
                                        </div>
                                        <div style="font-size:0.8rem;">Today</div>
                                    </div>
                                    <div>
                                        <h3 style="margin:0 0 5px 0;">Chat with Palak Shori</h3>
                                        <p style="margin:0; opacity:0.7; font-size:0.9rem;">Academic Stress Check-in</p>
                                    </div>
                                    <button class="b-action" style="margin-left:auto;">Join Room</button>
                                </div>
                            </div>

                            <!-- Recent Bookings Little Widget -->
                            <div class="card fade-in">
                                <div class="card-header">
                                    <span class="card-title">Recent Activity</span>
                                </div>
                                <div class="booking-item">
                                    <div class="b-date"><span class="b-day">20</span><span class="b-month">Oct</span>
                                    </div>
                                    <div class="b-info">
                                        <div class="b-name">Dr. Ananya Gupta</div>
                                        <div class="b-type">Therapy Session (Completed)</div>
                                    </div>
                                    <a href="#" class="b-action secondary">Notes</a>
                                </div>
                                <div class="booking-item">
                                    <div class="b-date"><span class="b-day">15</span><span class="b-month">Oct</span>
                                    </div>
                                    <div class="b-info">
                                        <div class="b-name">Aditya (Peer)</div>
                                        <div class="b-type">Peer Listening</div>
                                    </div>
                                    <a href="#" class="b-action secondary">Re-book</a>
                                </div>
                            </div>
                        </div>

                        <!-- Right Col -->
                        <div>
                            <div class="card fade-in">
                                <div class="card-header"><span class="card-title">Quick Actions</span></div>
                                <div class="tools-grid">
                                    <a href="../tools/confession-box/index.html" class="tool-btn">
                                        <i class="fas fa-box-open tool-icon"></i>
                                        <div>Vent Box</div>
                                    </a>
                                    <a href="#" class="tool-btn" onclick="switchTab('soulbot')">
                                        <i class="fas fa-robot tool-icon"></i>
                                        <div>SoulBot</div>
                                    </a>
                                    <a href="../spaces/campus/student-resources.html" class="tool-btn"
                                        style="grid-column:1/-1;">
                                        <i class="fas fa-toolbox tool-icon"></i>
                                        <div>Emergency Toolkit</div>
                                    </a>
                                </div>
                            </div>
                        </div>
                    </div>
                </div>

                <!-- 2. BOOKINGS TAB -->
                <div id="tab-bookings" class="tab-panel">
                    <h2 style="margin-bottom:30px;">All Sessions</h2>
                    <div class="card">
                        <!-- Just duplicating items for demo -->
                        <div class="booking-item">
                            <div class="b-date"><span class="b-day">24</span><span class="b-month">Oct</span></div>
                            <div class="b-info">
                                <div class="b-name">Palak Shori</div>
                                <div class="b-type">Academic Wellness â€¢ Google Meet</div>
                            </div>
                            <span
                                style="color:var(--teal-glow); font-size:0.9rem; font-weight:600; margin-right:15px;">Upcoming</span>
                            <a href="#" class="b-action">Join</a>
                        </div>
                        <div class="booking-item">
                            <div class="b-date"><span class="b-day">20</span><span class="b-month">Oct</span></div>
                            <div class="b-info">
                                <div class="b-name">Dr. Ananya Gupta</div>
                                <div class="b-type">Therapy Session</div>
                            </div>
                            <span style="opacity:0.5; font-size:0.9rem; margin-right:15px;">Completed</span>
                            <a href="#" class="b-action secondary">Invoice</a>
                        </div>
                    </div>
                </div>

                <!-- 3. CALENDAR TAB -->
                <div id="tab-calendar" class="tab-panel">
                    <h2 style="margin-bottom:20px;">Schedule</h2>
                    <div class="calendar-placeholder">
                        <i class="fas fa-sync spin"></i>
                        <h3>SuperSaaS Calendar Loading...</h3>
                        <p>This space is reserved for the live booking integration.</p>
                    </div>
                </div>

                <!-- 4. SOULBOT TAB -->
                <div id="tab-soulbot" class="tab-panel">
                    <h2 style="margin-bottom:20px;">SoulBot AI Companion</h2>
                    <div class="card"
                        style="height: 600px; display:flex; flex-direction:column; background:rgba(15, 23, 42, 0.8);">
                        <div id="chatHistory"
                            style="flex:1; overflow-y:auto; padding:20px; display:flex; flex-direction:column; gap:15px;">
                            <!-- Chat Bubble Template -->
                            <div
                                style="align-self:flex-start; background:rgba(255,255,255,0.1); padding:10px 15px; border-radius:15px 15px 15px 0; max-width:80%;">
                                <div style="font-size:0.8rem; opacity:0.6; margin-bottom:4px;">SoulBot</div>
                                <div>Hi there! I remember our past conversations. How are you feeling today?</div>
                            </div>
                        </div>
                        <div style="padding:20px; border-top:1px solid var(--border-glass); display:flex; gap:10px;">
                            <input type="text" id="chatInput" placeholder="Type a message..."
                                style="flex:1; padding:12px; border-radius:50px; border:none; background:rgba(255,255,255,0.1); color:white; outline:none;"
                                onkeypress="if(event.key==='Enter') sendChat()">
                            <button onclick="sendChat()"
                                style="width:45px; height:45px; border-radius:50%; border:none; background:var(--teal-glow); color:var(--deep-space); font-weight:700; cursor:pointer;"><i
                                    class="fas fa-paper-plane"></i></button>
                        </div>
                    </div>
                </div>

                <!-- 5. JOURNAL TAB -->
                <div id="tab-journal" class="tab-panel">
                    <h2 style="margin-bottom:20px;">My Journal</h2>
                    <div class="card journal-empty">
                        <i class="fas fa-book" style="font-size:3rem; margin-bottom:20px; opacity:0.3;"></i>
                        <h3>Your Safe Space is Coming Soon</h3>
                        <p>We are building a private, encrypted digital journal for you.</p>
                    </div>
                </div>

            </div>
        </div>
    </div>

    <script>
        // --- 1. PARTICLES (Reusing global logic) ---
        const pContainer = document.getElementById('particles');
        for (let i = 0; i < 40; i++) {
            let p = document.createElement('div');
            p.style.position = 'absolute';
            p.style.left = Math.random() * 100 + '%';
            p.style.top = Math.random() * 100 + '%';
            p.style.width = Math.random() * 3 + 'px';
            p.style.height = p.style.width;
            p.style.background = 'white';
            p.style.borderRadius = '50%';
            p.style.opacity = Math.random() * 0.3;
            p.style.animation = `float ${Math.random() * 20 + 10}s linear infinite`;
            pContainer.appendChild(p);
        }

        // --- 2. PERSONALIZATION ---
        // Simulating data check
        const userName = localStorage.getItem('user_name') || "Friend";
        document.getElementById('welcomeMsg').innerText = `Good Morning, ${userName}`;
        document.getElementById('navName').innerText = userName;
        document.getElementById('navAvatar').innerText = userName.charAt(0);

        // Date
        const options = { weekday: 'long', year: 'numeric', month: 'long', day: 'numeric' };
        document.getElementById('dateDisplay').innerText = new Date().toLocaleDateString('en-US', options);

        // --- 3. TABS ---
        function switchTab(tabId) {
            // Update Nav
            document.querySelectorAll('.nav-item').forEach(el => el.classList.remove('active'));
            // Find the clicked element (simplified for this structure)
            const targetNav = Array.from(document.querySelectorAll('.nav-item')).find(el => el.getAttribute('onclick').includes(tabId));
            if (targetNav) targetNav.classList.add('active');

            // Update Panels
            document.querySelectorAll('.tab-panel').forEach(el => el.classList.remove('active'));
            document.getElementById('tab-' + tabId).classList.add('active');

            // If opening chatbot, load history
            if (tabId === 'soulbot') {
                loadChatHistory();
            }
        }

        // --- 4. SOULBOT LOGIC ---
        function loadChatHistory() {
            const history = JSON.parse(localStorage.getItem('soulbot_history') || "[]");
            const chatBox = document.getElementById('chatHistory');

            // If empty, allow the default greeting to stay, otherwise clear and load
            if (history.length > 0) {
                chatBox.innerHTML = '';
                history.forEach(msg => appendMessage(msg.sender, msg.text, false)); // false = don't save again
            }
        }

        function appendMessage(sender, text, save = true) {
            const chatBox = document.getElementById('chatHistory');
            const div = document.createElement('div');
            const isUser = sender === 'Me';

            div.style.alignSelf = isUser ? 'flex-end' : 'flex-start';
            div.style.background = isUser ? 'var(--teal-glow)' : 'rgba(255,255,255,0.1)';
            div.style.color = isUser ? 'var(--deep-space)' : 'white';
            div.style.padding = '10px 15px';
            div.style.borderRadius = isUser ? '15px 15px 0 15px' : '15px 15px 15px 0';
            div.style.maxWidth = '80%';
            div.style.boxShadow = '0 2px 5px rgba(0,0,0,0.2)';

            div.innerHTML = `
                <div style="font-size:0.7rem; opacity:0.6; margin-bottom:4px; text-align:${isUser ? 'right' : 'left'}">${sender}</div>
                <div>${text}</div>
            `;

            chatBox.appendChild(div);
            chatBox.scrollTop = chatBox.scrollHeight;

            if (save) {
                const history = JSON.parse(localStorage.getItem('soulbot_history') || "[]");
                history.push({ sender, text });
                localStorage.setItem('soulbot_history', JSON.stringify(history));
            }
        }

        function sendChat() {
            const input = document.getElementById('chatInput');
            const text = input.value.trim();
            if (!text) return;

            appendMessage('Me', text);
            input.value = '';

            // Simulated Response
            setTimeout(() => {
                const responses = [
                    "I hear you. Tell me more about that.",
                    "That sounds challenging. How have you been coping?",
                    "It's okay to feel this way. I'm here for you.",
                    "Have you tried any grounding exercises today?",
                    "I'm listening. You are not alone."
                ];
                const reply = responses[Math.floor(Math.random() * responses.length)];
                appendMessage('SoulBot', reply);
            }, 1000);
        }
    </script>
</body>

</html>
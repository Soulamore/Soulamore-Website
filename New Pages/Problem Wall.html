<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>The Problem Wall | Soulamore</title>
    <link href="https://fonts.googleapis.com/css2?family=Outfit:wght@300;400;600&family=Plus+Jakarta+Sans:wght@300;400;500&display=swap" rel="stylesheet">
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css">

    <style>
        /* --- THEME: DAYBREAK CANVAS --- */
        :root {
            /* Light, Airy, Organic Palette */
            --sky-bg: #f8fafc;
            --paper-note: #ffffff;
            --ink-text: #334155;
            --soft-shadow: rgba(0, 0, 0, 0.03);
            --border-faint: rgba(0, 0, 0, 0.05);
            
            /* Accents (Muted) */
            --gentle-teal: #99f6e4;
            --warm-peach: #ffedd5;
            --soft-gold: #fef3c7;
            --calm-blue: #e0f2fe;

            /* Interaction */
            --focus-glow: rgba(255, 255, 255, 0.8);
            --reaction-hover: rgba(0, 0, 0, 0.02);
        }

        * { margin: 0; padding: 0; box-sizing: border-box; }

        body {
            font-family: 'Plus Jakarta Sans', sans-serif;
            background-color: var(--sky-bg);
            color: var(--ink-text);
            height: 100vh;
            width: 100vw;
            overflow: hidden; /* Infinite Canvas Feeling */
            position: relative;
            cursor: grab; /* Pan Interaction */
            background-image: 
                radial-gradient(circle at 10% 20%, rgba(224, 242, 254, 0.4) 0%, transparent 40%),
                radial-gradient(circle at 90% 80%, rgba(255, 237, 213, 0.4) 0%, transparent 40%);
        }

        h1, h2, h3 { font-family: 'Outfit', sans-serif; font-weight: 400; }

        /* --- THE CANVAS CONTAINER --- */
        #infinite-canvas {
            position: absolute;
            top: 0; left: 0;
            width: 100%; height: 100%;
            transform-origin: center center;
            transition: transform 0.1s ease-out; /* Smooth Pan */
        }

        /* --- THE NOTES --- */
        .note {
            position: absolute;
            width: 280px;
            background: var(--paper-note);
            padding: 25px 20px;
            border-radius: 2px; /* Paper-like */
            box-shadow: 0 4px 20px var(--soft-shadow), 0 1px 3px var(--border-faint);
            transition: all 0.4s cubic-bezier(0.25, 0.8, 0.25, 1);
            cursor: pointer;
            display: flex;
            flex-direction: column;
            justify-content: space-between;
            border: 1px solid rgba(255,255,255,0.8); /* Slight outline */
            
            /* Initial gentle drift animation */
            animation: drift 20s infinite alternate ease-in-out;
        }

        .note:hover {
            transform: scale(1.05) translateY(-5px);
            z-index: 100;
            box-shadow: 0 20px 40px rgba(0,0,0,0.06);
            border-color: rgba(0,0,0,0.05);
        }

        .note-text {
            font-family: 'Outfit', sans-serif;
            font-size: 1.05rem;
            line-height: 1.5;
            color: #1e293b;
            margin-bottom: 20px;
        }

        .note-meta {
            font-size: 0.75rem;
            color: #94a3b8;
            opacity: 0.7;
            margin-bottom: 15px;
        }

        /* REACTIONS ROW */
        .reaction-row {
            display: flex;
            gap: 15px;
            border-top: 1px solid var(--border-faint);
            padding-top: 15px;
            opacity: 0.6;
            transition: 0.3s;
        }
        .note:hover .reaction-row { opacity: 1; }

        .react-btn {
            background: transparent; border: none; cursor: pointer;
            font-size: 1.1rem; color: #cbd5e1; transition: 0.2s;
            display: flex; align-items: center; gap: 5px;
        }
        .react-btn:hover { transform: scale(1.2); }
        .react-btn.active { color: #f472b6; } /* Active Heart */
        .react-btn.flower:hover { color: #fbbf24; }
        .react-btn.candle:hover { color: #f97316; }

        /* Drifting Animation */
        @keyframes drift {
            0% { transform: translate(0, 0) rotate(0deg); }
            100% { transform: translate(10px, -10px) rotate(1deg); }
        }

        /* --- UI OVERLAYS (Fixed) --- */
        .ui-layer {
            position: fixed; pointer-events: none; width: 100%; height: 100%; z-index: 200;
            top: 0; left: 0;
        }
        
        /* 1. Header (Minimal) */
        .wall-header {
            position: absolute; top: 30px; left: 50%; transform: translateX(-50%);
            text-align: center; pointer-events: auto;
        }
        .wall-title {
            font-size: 2rem; color: var(--ink-text); letter-spacing: 1px; margin-bottom: 5px;
            background: rgba(255,255,255,0.8); backdrop-filter: blur(5px);
            padding: 5px 20px; border-radius: 50px;
        }
        .wall-sub { font-size: 0.9rem; opacity: 0.6; }

        /* 2. Add Note FAB (Floating Action Button) */
        .fab-wrapper {
            position: absolute; bottom: 40px; left: 50%; transform: translateX(-50%);
            pointer-events: auto; text-align: center;
        }
        .add-note-btn {
            background: #1e293b; color: white; border: none;
            padding: 15px 30px; border-radius: 50px; font-family: 'Outfit';
            font-size: 1rem; font-weight: 600; cursor: pointer;
            box-shadow: 0 10px 30px rgba(0,0,0,0.1); transition: 0.3s;
            display: flex; align-items: center; gap: 10px;
        }
        .add-note-btn:hover { transform: scale(1.05) translateY(-2px); box-shadow: 0 15px 40px rgba(0,0,0,0.15); }

        /* --- WRITING MODAL (Soft Overlay) --- */
        .modal-overlay {
            position: fixed; top: 0; left: 0; width: 100%; height: 100%;
            background: rgba(255,255,255,0.8); backdrop-filter: blur(10px);
            z-index: 300; display: none; align-items: center; justify-content: center;
            opacity: 0; transition: opacity 0.5s;
        }
        .modal-overlay.active { opacity: 1; pointer-events: auto; }

        .write-card {
            background: white; width: 90%; max-width: 500px;
            padding: 50px 40px; border-radius: 2px;
            box-shadow: 0 20px 60px rgba(0,0,0,0.08);
            text-align: center; position: relative;
            transform: translateY(20px); transition: 0.5s;
        }
        .modal-overlay.active .write-card { transform: translateY(0); }

        .close-modal {
            position: absolute; top: 20px; right: 20px; cursor: pointer;
            font-size: 1.5rem; opacity: 0.3; transition: 0.2s;
        }
        .close-modal:hover { opacity: 1; }

        .write-input {
            width: 100%; border: none; border-bottom: 2px solid #f1f5f9;
            padding: 20px; font-family: 'Outfit'; font-size: 1.4rem; color: #334155;
            outline: none; resize: none; margin-bottom: 30px; background: transparent;
            text-align: center;
        }
        .write-input::placeholder { color: #cbd5e1; }
        .write-input:focus { border-color: var(--gentle-teal); }

        .options-row {
            display: flex; justify-content: center; gap: 20px; margin-bottom: 30px;
        }
        .option-pill {
            padding: 8px 16px; border-radius: 50px; border: 1px solid #e2e8f0;
            font-size: 0.85rem; cursor: pointer; transition: 0.2s; opacity: 0.6;
        }
        .option-pill:hover, .option-pill.selected { border-color: #334155; opacity: 1; background: #f8fafc; }

        .submit-btn {
            background: transparent; border: 1px solid #334155; color: #334155;
            padding: 12px 40px; border-radius: 50px; font-weight: 600; cursor: pointer;
            transition: 0.3s;
        }
        .submit-btn:hover { background: #334155; color: white; }

        /* --- NOTIFICATIONS --- */
        .toast {
            position: fixed; top: 30px; right: 30px; background: white;
            padding: 15px 25px; border-radius: 12px; box-shadow: 0 10px 30px rgba(0,0,0,0.05);
            display: flex; align-items: center; gap: 10px; transform: translateX(200%); transition: 0.5s;
            font-size: 0.9rem; z-index: 500;
        }
        .toast.show { transform: translateX(0); }
        .toast-icon { color: var(--accent-teal); }

        /* --- MOBILE --- */
        @media(max-width: 600px) {
            .note { width: 85vw; padding: 20px; }
            .write-input { font-size: 1.1rem; }
            .options-row { flex-direction: column; gap: 10px; }
        }
    </style>
</head>
<body>

    <!-- 1. INFINITE CANVAS -->
    <div id="infinite-canvas">
        <!-- Notes will be injected here via JS -->
    </div>

    <!-- 2. UI LAYER (Fixed) -->
    <div class="ui-layer">
        <div class="wall-header">
            <div class="wall-title">The Problem Wall</div>
            <div class="wall-sub">A place where pain is seen, not solved.</div>
        </div>

        <div class="fab-wrapper">
            <button class="add-note-btn" onclick="openWriter()">
                <i class="fas fa-pen"></i> Add to Wall
            </button>
            <div style="font-size:0.8rem; opacity:0.6; margin-top:10px;">Others are here with you.</div>
        </div>
    </div>

    <!-- 3. WRITING MODAL -->
    <div class="modal-overlay" id="writeModal">
        <div class="write-card">
            <div class="close-modal" onclick="closeWriter()">&times;</div>
            <h2 style="margin-bottom:10px; opacity:0.8;">Leave a burden here.</h2>
            <p style="font-size:0.9rem; opacity:0.5; margin-bottom:30px;">No one will judge. No one will fix.</p>
            
            <textarea id="noteInput" class="write-input" rows="1" placeholder="Write one thing youâ€™re carrying..." oninput="autoResize(this)"></textarea>
            
            <div class="options-row">
                <div class="option-pill" onclick="toggleOption(this)">Post only to Wall</div>
                <div class="option-pill" onclick="toggleOption(this)">Open to Peer Support</div>
            </div>

            <button class="submit-btn" onclick="postNote()">Let it be seen</button>
        </div>
    </div>

    <!-- 4. TOAST NOTIFICATION -->
    <div class="toast" id="toast">
        <i class="fas fa-check-circle" style="color:#10b981;"></i>
        <span>This was shared anonymously.</span>
    </div>

    <script>
        // --- DATA: INITIAL SEED NOTES ---
        const seedNotes = [
            "I feel like I'm failing everyone.",
            "I miss someone who hurt me.",
            "The silence in my apartment is too loud today.",
            "I am tired of pretending I'm okay at work.",
            "I don't know who I am anymore.",
            "Everyone else seems to have it figured out.",
            "I'm scared I'll never feel happy again.",
            "I wish I could just pause time for a week."
        ];

        // --- CANVAS LOGIC ---
        const canvas = document.getElementById('infinite-canvas');
        let isDragging = false;
        let startX, startY, scrollLeft, scrollTop;

        // Populate Initial Notes
        function initCanvas() {
            // Create 15 random notes
            for(let i=0; i<15; i++) {
                const text = seedNotes[Math.floor(Math.random() * seedNotes.length)];
                createNoteElement(text, getRandomPos());
            }
            // Center Canvas
            canvas.style.left = "-200px"; // Adjust for centering visual
            canvas.style.top = "-100px";
        }

        function getRandomPos() {
            // Random scatter
            const x = Math.random() * (window.innerWidth * 1.5) + 100;
            const y = Math.random() * (window.innerHeight * 1.2) + 50;
            return {x, y};
        }

        function createNoteElement(text, pos) {
            const note = document.createElement('div');
            note.className = 'note';
            
            // Random Rotation for organic look
            const rot = (Math.random() - 0.5) * 6; // +/- 3deg
            note.style.left = pos.x + 'px';
            note.style.top = pos.y + 'px';
            note.style.transform = `rotate(${rot}deg)`;
            
            // Random "Paper" tint
            const tints = ['#ffffff', '#fdfbf7', '#fefce8']; // White, Cream, Soft Yellow
            note.style.background = tints[Math.floor(Math.random() * tints.length)];

            note.innerHTML = `
                <div class="note-text">${text}</div>
                <div class="note-meta">Shared quietly</div>
                <div class="reaction-row">
                    <button class="react-btn" onclick="react(this)"><i class="far fa-heart"></i></button>
                    <button class="react-btn flower" onclick="react(this)"><i class="fas fa-spa"></i></button>
                    <button class="react-btn candle" onclick="react(this)"><i class="fas fa-fire-alt"></i></button>
                </div>
            `;
            
            // Add Drag Capability to Canvas (Pan)
            // (Note: Individual note dragging disabled to keep "Pinned" feel, only pan canvas)
            
            canvas.appendChild(note);
        }

        // --- PANNING LOGIC (Drag Background) ---
        document.body.addEventListener('mousedown', (e) => {
            if(e.target.closest('.note') || e.target.closest('.ui-layer')) return;
            isDragging = true;
            startX = e.pageX - canvas.offsetLeft;
            startY = e.pageY - canvas.offsetTop;
            document.body.style.cursor = 'grabbing';
        });

        document.body.addEventListener('mouseleave', () => { isDragging = false; document.body.style.cursor = 'grab'; });
        document.body.addEventListener('mouseup', () => { isDragging = false; document.body.style.cursor = 'grab'; });

        document.body.addEventListener('mousemove', (e) => {
            if(!isDragging) return;
            e.preventDefault();
            const x = e.pageX - startX;
            const y = e.pageY - startY;
            canvas.style.left = x + 'px';
            canvas.style.top = y + 'px';
        });

        // --- MODAL LOGIC ---
        function openWriter() {
            document.getElementById('writeModal').style.display = 'flex';
            setTimeout(() => document.getElementById('writeModal').classList.add('active'), 10);
        }
        function closeWriter() {
            document.getElementById('writeModal').classList.remove('active');
            setTimeout(() => document.getElementById('writeModal').style.display = 'none', 500);
        }

        function toggleOption(el) {
            document.querySelectorAll('.option-pill').forEach(p => p.classList.remove('selected'));
            el.classList.add('selected');
        }

        function autoResize(el) {
            el.style.height = 'auto';
            el.style.height = el.scrollHeight + 'px';
        }

        // --- POSTING LOGIC ---
        function postNote() {
            const txt = document.getElementById('noteInput').value;
            if(!txt.trim()) return;

            // 1. Create Note in Center of View
            // Calculation to center based on current canvas offset
            const viewportX = window.innerWidth / 2;
            const viewportY = window.innerHeight / 2;
            const rect = canvas.getBoundingClientRect();
            const relativeX = viewportX - rect.left; 
            const relativeY = viewportY - rect.top;

            createNoteElement(txt, {x: relativeX - 140, y: relativeY - 100}); // -140 is half note width

            // 2. Clear & Close
            document.getElementById('noteInput').value = "";
            closeWriter();

            // 3. Show Toast
            const toast = document.getElementById('toast');
            toast.classList.add('show');
            setTimeout(() => toast.classList.remove('show'), 3000);
        }

        // --- REACTION LOGIC ---
        function react(btn) {
            event.stopPropagation(); // Don't trigger note hover
            btn.classList.toggle('active');
            
            // Animation Pulse
            btn.style.transform = "scale(1.4)";
            setTimeout(() => btn.style.transform = "scale(1)", 200);
            
            if(btn.querySelector('.fa-heart')) {
                btn.innerHTML = btn.classList.contains('active') ? '<i class="fas fa-heart"></i>' : '<i class="far fa-heart"></i>';
            }
        }

        // Init
        initCanvas();

    </script>
</body>
</html>
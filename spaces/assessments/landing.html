<!DOCTYPE html>
<html lang="en">

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <meta id="meta-description" name="description"
        content="Take the Soulamore Assessment to understand your emotional landscape.">
    <title id="page-title">Personalized Assessment | Soulamore</title>

    <!-- Open Graph / Facebook -->
    <meta property="og:type" content="website">
    <meta property="og:url" content="https://soulamore.com/spaces/assessments/landing.html">
    <meta property="og:title" content="Personalized Assessment | Soulamore">
    <meta property="og:description"
        content="Explore your psychological signature with Soulamore's clinical assessments. Safe, anonymous, and insightful.">
    <meta property="og:image" content="https://soulamore.com/assets/images/social-preview.png">

    <!-- Twitter -->
    <meta name="twitter:card" content="summary_large_image">
    <meta name="twitter:title" content="Personalized Assessment | Soulamore">
    <meta name="twitter:description"
        content="Explore your psychological signature with Soulamore's clinical assessments. Safe, anonymous, and insightful.">
    <meta name="twitter:image" content="https://soulamore.com/assets/images/social-preview.png">
    <link
        href="https://fonts.googleapis.com/css2?family=Outfit:wght@300;400;600;700&family=Plus+Jakarta+Sans:wght@300;400;500;600&display=swap"
        rel="stylesheet">
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css">
    <link rel="stylesheet" href="../../assets/css/global.css">

    <style>
        :root {
            --deep-space: #0f172a;
            --navy-glass: rgba(30, 41, 59, 0.7);
            --starlight: #f1f5f9;
            --peach-glow: #F49F75;
            --teal-glow: #4ECDC4;
            --gold-glow: #fbbf24;
            --border-glass: rgba(255, 255, 255, 0.1);
        }

        body {
            font-family: 'Plus Jakarta Sans', sans-serif;
            background-color: var(--deep-space);
            color: var(--starlight);
            line-height: 1.6;
            overflow-x: hidden;
            background-image: radial-gradient(circle at 15% 50%, rgba(78, 205, 196, 0.05), transparent 25%),
                radial-gradient(circle at 85% 30%, rgba(244, 159, 117, 0.05), transparent 25%);
        }

        .container {
            max-width: 900px;
            margin: 0 auto;
            padding: 80px 24px;
            position: relative;
            z-index: 5;
        }

        /* --- LANDING HERO --- */
        .landing-hero {
            text-align: center;
            margin-bottom: 60px;
        }

        #assessment-tag {
            color: var(--teal-glow);
            border: 1px solid rgba(78, 205, 196, 0.3);
            background: rgba(78, 205, 196, 0.1);
            padding: 6px 16px;
            border-radius: 50px;
            font-size: 0.8rem;
            display: inline-block;
            margin-bottom: 24px;
            text-transform: uppercase;
            font-weight: 600;
            letter-spacing: 1.5px;
        }

        #assessment-title {
            font-family: 'Outfit', sans-serif;
            font-size: clamp(2.5rem, 10vw, 4rem);
            line-height: 1.1;
            margin-bottom: 24px;
            background: linear-gradient(to right, #fff, #94a3b8);
            background-clip: text;
            -webkit-background-clip: text;
            -webkit-text-fill-color: transparent;
        }

        #assessment-desc {
            font-size: 1.25rem;
            opacity: 0.8;
            max-width: 700px;
            margin: 0 auto 40px;
            font-weight: 300;
        }

        .cta-group {
            display: flex;
            flex-direction: column;
            align-items: center;
            gap: 16px;
        }

        .btn-primary {
            background: white;
            color: var(--deep-space);
            padding: 18px 40px;
            border-radius: 12px;
            font-weight: 700;
            font-size: 1.1rem;
            text-decoration: none;
            transition: all 0.3s ease;
            box-shadow: 0 10px 30px rgba(0, 0, 0, 0.3);
            display: inline-flex;
            align-items: center;
            gap: 10px;
        }

        .btn-primary:hover {
            transform: translateY(-3px);
            box-shadow: 0 15px 40px rgba(78, 205, 196, 0.2);
            background: var(--teal-glow);
            color: white;
        }

        .meta-stat {
            font-size: 0.9rem;
            opacity: 0.5;
            display: flex;
            gap: 20px;
        }

        /* --- FEATURE GRID --- */
        .feature-grid {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(300px, 1fr));
            gap: 30px;
            margin-bottom: 60px;
        }

        .feature-card {
            background: var(--navy-glass);
            border: 1px solid var(--border-glass);
            backdrop-filter: blur(12px);
            padding: 40px;
            border-radius: 24px;
            transition: border 0.3s ease;
        }

        .feature-card h3 {
            font-family: 'Outfit';
            font-size: 1.5rem;
            margin-bottom: 15px;
            color: var(--teal-glow);
        }

        .feature-card p {
            opacity: 0.7;
            font-size: 1rem;
        }

        /* --- CITATION SECTION --- */
        .citation-section {
            border-top: 1px solid var(--border-glass);
            padding-top: 60px;
            text-align: center;
        }

        .citation-section h2 {
            font-family: 'Outfit';
            margin-bottom: 30px;
            opacity: 0.9;
        }

        .citation-grid {
            display: flex;
            flex-wrap: wrap;
            justify-content: center;
            gap: 15px;
            opacity: 0.6;
        }

        .citation-item {
            background: rgba(255, 255, 255, 0.05);
            padding: 8px 16px;
            border-radius: 8px;
            font-size: 0.85rem;
            border: 1px solid rgba(255, 255, 255, 0.05);
        }

        /* --- LOADING STATE --- */
        #loader {
            position: fixed;
            inset: 0;
            background: var(--deep-space);
            z-index: 100;
            display: flex;
            justify-content: center;
            align-items: center;
            transition: opacity 0.5s ease;
        }

        /* --- RESPONSIVE --- */
        @media (max-width: 600px) {
            .container {
                padding: 40px 20px;
            }

            #assessment-title {
                font-size: 2.5rem;
            }
        }
    </style>
</head>

<body>
    <div id="loader">
        <i class="fas fa-circle-notch fa-spin fa-2x" style="color: var(--teal-glow)"></i>
    </div>

    <!-- STAR BACKGROUND -->
    <div id="particles"></div>

    <div class="container fade-in">
        <div class="landing-hero">
            <div id="assessment-tag">Assessment Journey</div>
            <h1 id="assessment-title">Understanding Your Path</h1>
            <p id="assessment-desc">Discover the clinical structure of your inner world through a guided, personalized
                experience.</p>

            <div class="cta-group">
                <a href="#" id="start-btn" class="btn-primary">
                    Start Assessment <i class="fas fa-arrow-right"></i>
                </a>
                <div class="meta-stat">
                    <span><i class="far fa-clock"></i> 3-5 Minutes</span>
                    <span><i class="fas fa-shield-alt"></i> Private & Anonymous</span>
                </div>
            </div>
        </div>

        <div class="feature-grid">
            <div class="feature-card">
                <h3>Clinical Goal</h3>
                <p id="clinical-goal-text">Our framework identifies patterns in emotional intensity and functional
                    capacity.</p>
            </div>
            <div class="feature-card">
                <h3>Insight Preview</h3>
                <p id="insight-preview-text">"When uncertainty hits, the brain treats it as a threat. This assessment
                    maps that response."</p>
            </div>
        </div>

        <div class="citation-section" id="expert-section"
            style="display: none; margin-top: 40px; border-top: 1px solid var(--border-glass); padding-top: 40px;">
            <div
                style="display: flex; align-items: center; gap: 20px; background: rgba(255,255,255,0.03); padding: 24px; border-radius: 16px; border: 1px solid var(--border-glass);">
                <img id="expert-img" src="" alt="Expert"
                    style="width: 80px; height: 80px; border-radius: 50%; object-fit: cover; border: 2px solid var(--teal-glow);">
                <div>
                    <div style="display: flex; align-items: center; gap: 8px; margin-bottom: 4px;">
                        <span
                            style="font-size: 0.7rem; color: var(--teal-glow); font-weight: 700; text-transform: uppercase; letter-spacing: 1px;">Expert
                            Reviewer</span>
                        <i class="fas fa-check-circle" style="color: var(--teal-glow); font-size: 0.8rem;"></i>
                    </div>
                    <h4 id="expert-name" style="margin: 0; font-family: 'Outfit', sans-serif; font-size: 1.2rem;"></h4>
                    <p id="expert-title" style="margin: 0; font-size: 0.9rem; opacity: 0.7;"></p>
                    <p id="expert-bio" style="margin: 8px 0 0; font-size: 0.85rem; opacity: 0.6; line-height: 1.4;"></p>
                </div>
            </div>
        </div>

        <div class="citation-section" id="citations-container" style="display: none;">
            <h2>Scientifically Structured</h2>
            <div class="citation-grid" id="citation-list">
                <!-- Citations injected here -->
            </div>
        </div>
    </div>

    <script src="../../assets/js/assessment-data.js"></script>
    <script src="../../assets/js/expert-bios.js"></script>
    <script>
        document.addEventListener('DOMContentLoaded', () => {
            const params = new URLSearchParams(window.location.search);
            const id = params.get('id');
            const loader = document.getElementById('loader');

            if (!id || !window.SoulamoreAssessments[id]) {
                // FALLBACK: Show a selection state rather than a silent redirect
                document.getElementById('assessment-title').innerText = "Select Your Journey";
                document.getElementById('assessment-desc').innerText = "Explore our library of 110+ clinical assessments designed for your well-being.";
                document.getElementById('start-btn').innerText = "Explore Library";
                document.getElementById('start-btn').href = "index.html";

                // Hide loader
                setTimeout(() => {
                    loader.style.opacity = '0';
                    setTimeout(() => loader.style.display = 'none', 500);
                }, 300);
                return;
            }

            const data = window.SoulamoreAssessments[id];
            const citations = window.SoulamoreCitations[id];

            // Update DOM
            document.getElementById('page-title').innerText = `${data.title} | Soulamore`;
            document.getElementById('assessment-title').innerText = data.title;
            document.getElementById('assessment-desc').innerText = data.description;
            document.getElementById('assessment-tag').innerText = data.primary_domain || 'Psychological Assessment';

            // Clinical Goal
            if (data.clinical_goal) {
                document.getElementById('clinical-goal-text').innerText = data.clinical_goal;
            }

            // Insight Preview (Take first insight cloud from first question)
            if (data.questions && data.questions[0] && data.questions[0].insight_cloud) {
                document.getElementById('insight-preview-text').innerText = `"${data.questions[0].insight_cloud.text.substring(0, 150)}..."`;
            }

            // Citations
            if (citations && citations.citations.length > 0) {
                const container = document.getElementById('citations-container');
                const list = document.getElementById('citation-list');
                container.style.display = 'block';
                list.innerHTML = citations.citations.map(c => `<div class="citation-item">${c.name}</div>`).join('');
            }

            // Expert Injection (E-E-A-T)
            const expertId = data.reviewer_id || 'bhagyavathi'; // Default to clinic lead
            if (window.SoulamoreExperts && window.SoulamoreExperts[expertId]) {
                const expert = window.SoulamoreExperts[expertId];
                document.getElementById('expert-section').style.display = 'block';
                document.getElementById('expert-img').src = expert.image;
                document.getElementById('expert-name').innerText = expert.name;
                document.getElementById('expert-title').innerText = `${expert.title} (${expert.credentials})`;
                document.getElementById('expert-bio').innerText = expert.bio;
            }

            // Button Link
            document.getElementById('start-btn').href = `engine.html?id=${id}`;

            // SEO Meta (Dynamic)
            if (data.seoTitle) {
                document.title = data.seoTitle;
            } else {
                document.title = `${data.title} | Soulamore Personalized Assessment`;
            }

            const metaDesc = data.seoDescription || `${data.title} Assessment: ${data.description}. Free, private, and scientifically grounded.`;
            document.getElementById('meta-description').content = metaDesc;

            // Open Graph Dynamic Updates
            const ogTitle = document.querySelector('meta[property="og:title"]');
            if (ogTitle) ogTitle.content = document.title;
            const ogDesc = document.querySelector('meta[property="og:description"]');
            if (ogDesc) ogDesc.content = metaDesc;

            // Inject Schema.org JSON-LD
            injectAssessmentSchema(data);

            // Particle Background Effect
            createParticles();

            // Hide loader
            setTimeout(() => {
                loader.style.opacity = '0';
                setTimeout(() => loader.style.display = 'none', 500);
            }, 300);
        });

        function injectAssessmentSchema(data) {
            const script = document.createElement('script');
            script.type = 'application/ld+json';

            const schema = {
                "@context": "https://schema.org",
                "@type": "Quiz",
                "name": data.seoTitle || data.title,
                "description": data.seoDescription || data.description,
                "url": window.location.href,
                "educationalLevel": "Adult",
                "assesses": data.tags ? data.tags.join(", ") : data.primary_domain,
                "author": {
                    "@type": "Organization",
                    "name": "Soulamore"
                }
            };

            // Add questions to schema if available
            if (data.questions) {
                schema.hasPart = data.questions.map((q, idx) => ({
                    "@type": "Question",
                    "name": `Question ${idx + 1}`,
                    "text": q.text
                }));
            }

            script.text = JSON.stringify(schema);
            document.head.appendChild(script);

            // Add MedicalTest schema for clinical credibility
            const medicalScript = document.createElement('script');
            medicalScript.type = 'application/ld+json';
            const medicalSchema = {
                "@context": "https://schema.org",
                "@type": "MedicalTest",
                "name": data.title,
                "description": data.description,
                "usedToDiagnose": {
                    "@type": "MedicalCondition",
                    "name": data.primary_domain
                },
                "isAvailableGenerically": true
            };
            medicalScript.text = JSON.stringify(medicalSchema);
            document.head.appendChild(medicalScript);
        }

        function createParticles() {
            const container = document.getElementById('particles');
            for (let i = 0; i < 30; i++) {
                const p = document.createElement('div');
                p.className = 'particle';
                p.style.left = Math.random() * 100 + 'vw';
                p.style.top = Math.random() * 100 + 'vh';
                const size = Math.random() * 3 + 1;
                p.style.width = size + 'px';
                p.style.height = size + 'px';
                p.style.animationDuration = (Math.random() * 10 + 10) + 's';
                p.style.animationDelay = Math.random() * 5 + 's';
                container.appendChild(p);
            }
        }
    </script>
</body>

</html>
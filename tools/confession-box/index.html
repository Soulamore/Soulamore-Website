<!DOCTYPE html>
<html lang="en">

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <meta name="description"
        content="Share your secrets, guilt, or burdens anonymously in the Soulamore Confession Box. A safe space to vent and let go.">
    <title>Confession Box | Anonymous Support & Venting | Soulamore</title>

    <!-- Open Graph / Facebook -->
    <meta property="og:type" content="website">
    <meta property="og:url" content="https://soulamore-f0a64.web.app/confession-box.html">
    <meta property="og:title" content="Confession Box | Soulamore">
    <meta property="og:description"
        content="Share your secrets, guilt, or burdens anonymously. A safe space to vent and let go.">
    <meta property="og:image" content="https://soulamore-f0a64.web.app/assets/images/logo.png">

    <!-- Twitter -->
    <meta name="twitter:card" content="summary_large_image">
    <meta name="twitter:url" content="https://soulamore-f0a64.web.app/confession-box.html">
    <meta name="twitter:title" content="Confession Box | Soulamore">
    <meta name="twitter:description"
        content="Share your secrets, guilt, or burdens anonymously. A safe space to vent and let go.">
    <meta name="twitter:image" content="https://soulamore-f0a64.web.app/assets/images/logo.png">
    <!-- GLOBAL ASSETS -->
    <link
        href="https://fonts.googleapis.com/css2?family=Outfit:wght@300;400;600;700&family=Plus+Jakarta+Sans:wght@300;400;500;600&display=swap"
        rel="stylesheet">
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css">
    <link rel="stylesheet" href="../../assets/css/global.css">

    <!-- Presence -->
    <script type="module" src="../../assets/js/firebase-config.js"></script>
    <script type="module" src="../../assets/js/data-handler.js"></script>
    <script type="module" src="../../assets/js/presence-handler.js"></script>
    <link rel="icon" href="../../assets/images/favicons/favicon_rocket.svg" type="image/svg+xml">

    <style>
        /* --- DESIGN SYSTEM (Midnight Theme) --- */
        :root {
            --deep-space: #0f172a;
            --glass-panel: rgba(30, 41, 59, 0.7);
            --text-glow: #e2e8f0;
            --teal-glow: #4ECDC4;
            --peach-glow: #F49F75;
            --border-glass: rgba(255, 255, 255, 0.1);
        }

        body {
            font-family: 'Plus Jakarta Sans', sans-serif;
            background-color: var(--deep-space);
            color: var(--text-glow);
            line-height: 1.6;
            overflow-x: hidden;
            position: relative;
            background-image: radial-gradient(circle at 50% 10%, rgba(78, 205, 196, 0.05), transparent 70%);
        }

        h1,
        h2,
        h3 {
            font-family: 'Outfit', sans-serif;
        }

        a {
            text-decoration: none;
            color: inherit;
            transition: 0.3s;
        }

        .container {
            max-width: 1100px;
            margin: 0 auto;
            padding: 110px 24px 100px;
            position: relative;
            z-index: 5;
        }

        .fade-in {
            animation: fadeIn 1s ease-out forwards;
            opacity: 0;
            transform: translateY(30px);
        }

        @keyframes fadeIn {
            to {
                opacity: 1;
                transform: translateY(0);
            }
        }

        /* --- BACKGROUND ATMOSPHERE --- */
        #atmosphere {
            position: fixed;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            z-index: 1;
            pointer-events: none;
            overflow: hidden;
        }

        .thought-bubble {
            position: absolute;
            color: rgba(255, 255, 255, 0.2);
            font-family: 'Outfit', sans-serif;
            font-weight: 700;
            user-select: none;
            text-shadow: 0 0 20px rgba(255, 255, 255, 0.1);
            animation: floatUp linear infinite;
        }

        @keyframes floatUp {
            from {
                transform: translateY(110vh) scale(0.8);
                opacity: 0;
            }

            15% {
                opacity: 0.3;
            }

            85% {
                opacity: 0.3;
            }

            to {
                transform: translateY(-10vh) scale(1.1);
                opacity: 0;
            }
        }

        /* --- AUDIO TOGGLE --- */
        .audio-control {
            position: fixed;
            top: 120px;
            /* Increased to clear header */
            right: 20px;
            z-index: 999;
            /* Increased to be above content but below mobile menu */
            background: rgba(255, 255, 255, 0.1);
            backdrop-filter: blur(10px);
            border: 1px solid var(--border-glass);
            padding: 8px 16px;
            border-radius: 50px;
            cursor: pointer;
            display: flex;
            align-items: center;
            gap: 10px;
            transition: 0.3s;
            font-size: 0.9rem;
        }

        .audio-control:hover {
            background: rgba(255, 255, 255, 0.2);
            border-color: var(--teal-glow);
        }

        .audio-bars {
            display: flex;
            gap: 3px;
            height: 15px;
            align-items: flex-end;
        }

        .bar {
            width: 3px;
            background: var(--teal-glow);
            height: 5px;
        }

        .playing .bar {
            animation: soundWave 0.5s infinite;
        }

        @keyframes soundWave {
            0% {
                height: 5px;
            }

            50% {
                height: 15px;
            }

            100% {
                height: 5px;
            }
        }

        /* --- HERO SECTION --- */
        .hero {
            padding: 0 0 100px;
            text-align: center;
            position: relative;
        }

        .planet-icon {
            font-size: 5rem;
            margin-bottom: 20px;
            display: inline-block;
            animation: floatIcon 6s infinite ease-in-out;
            filter: drop-shadow(0 0 20px rgba(78, 205, 196, 0.3));
        }

        @keyframes floatIcon {

            0%,
            100% {
                transform: translateY(0) rotate(0deg);
            }

            50% {
                transform: translateY(-15px) rotate(5deg);
            }
        }

        .hero h1 {
            font-size: 4rem;
            margin-bottom: 20px;
            background: linear-gradient(to right, #fff, #94a3b8);
            -webkit-background-clip: text;
            -webkit-text-fill-color: transparent;
        }

        .hero p {
            font-size: 1.3rem;
            opacity: 0.8;
            max-width: 700px;
            margin: 0 auto;
            font-weight: 300;
        }

        /* --- STATS BAR --- */
        .stats-bar {
            background: var(--glass-panel);
            backdrop-filter: blur(12px);
            border: 1px solid var(--border-glass);
            border-radius: 20px;
            padding: 30px;
            margin-bottom: 60px;
            display: grid;
            grid-template-columns: repeat(3, 1fr);
            box-shadow: 0 20px 50px rgba(0, 0, 0, 0.3);
        }

        .stat-item {
            text-align: center;
            border-right: 1px solid var(--border-glass);
        }

        .stat-item:last-child {
            border-right: none;
        }

        .stat-num {
            font-size: 2.5rem;
            font-weight: 700;
            color: white;
            display: block;
            font-family: 'Outfit';
        }

        .stat-label {
            font-size: 0.9rem;
            color: var(--teal-glow);
            text-transform: uppercase;
            letter-spacing: 1.5px;
            margin-top: 5px;
        }

        /* --- TICKER --- */
        .ticker-wrap {
            width: 100%;
            overflow: hidden;
            background: rgba(0, 0, 0, 0.3);
            padding: 15px 0;
            margin-bottom: 100px;
            border-top: 1px solid var(--border-glass);
            border-bottom: 1px solid var(--border-glass);
        }

        .ticker {
            display: inline-block;
            white-space: nowrap;
            animation: scroll 35s linear infinite;
        }

        .ticker-item {
            display: inline-block;
            padding: 0 30px;
            font-size: 1rem;
            color: var(--peach-glow);
            font-weight: 600;
        }

        @keyframes scroll {
            0% {
                transform: translateX(0);
            }

            100% {
                transform: translateX(-50%);
            }
        }

        /* --- HOW IT WORKS (Cards) --- */
        .section-header {
            text-align: center;
            margin-bottom: 50px;
        }

        .section-header h2 {
            font-size: 2.5rem;
            color: white;
            margin-bottom: 10px;
        }

        .steps-grid {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(280px, 1fr));
            gap: 30px;
            margin-bottom: 120px;
        }

        .step-card {
            background: rgba(255, 255, 255, 0.03);
            border: 1px solid var(--border-glass);
            padding: 40px 30px;
            border-radius: 24px;
            text-align: center;
            transition: 0.4s;
        }

        .step-card:hover {
            transform: translateY(-10px);
            background: rgba(255, 255, 255, 0.06);
            border-color: var(--teal-glow);
            box-shadow: 0 10px 30px rgba(0, 0, 0, 0.2);
        }

        .step-num {
            font-size: 3rem;
            font-weight: 700;
            color: rgba(255, 255, 255, 0.1);
            margin-bottom: 15px;
        }

        .step-title {
            font-size: 1.4rem;
            font-weight: 600;
            color: white;
            margin-bottom: 15px;
        }

        .step-desc {
            font-size: 1rem;
            opacity: 0.7;
            line-height: 1.6;
        }

        /* --- PORTAL (Form) --- */
        .portal-wrapper {
            background: var(--glass-panel);
            backdrop-filter: blur(20px);
            border: 1px solid var(--border-glass);
            border-radius: 30px;
            display: grid;
            grid-template-columns: 1.2fr 2fr;
            overflow: hidden;
            box-shadow: 0 30px 60px rgba(0, 0, 0, 0.5);
            margin-bottom: 100px;
            position: relative;
        }

        .guidelines-panel {
            padding: 50px;
            background: rgba(0, 0, 0, 0.3);
            border-right: 1px solid var(--border-glass);
        }

        .guideline-item {
            display: flex;
            gap: 20px;
            margin-bottom: 30px;
            align-items: flex-start;
        }

        .g-icon {
            color: var(--peach-glow);
            font-size: 1.2rem;
            margin-top: 5px;
        }

        .g-text strong {
            display: block;
            color: white;
            font-size: 1.1rem;
            margin-bottom: 5px;
        }

        .g-text span {
            font-size: 0.9rem;
            opacity: 0.7;
        }

        .form-panel {
            padding: 50px;
            position: relative;
            perspective: 1000px;
        }

        .typing-area {
            width: 100%;
            height: 250px;
            background: rgba(255, 255, 255, 0.05);
            border: 1px solid var(--border-glass);
            border-radius: 16px;
            padding: 25px;
            color: white;
            font-family: inherit;
            font-size: 1.1rem;
            resize: none;
            outline: none;
            transition: 0.3s;
            box-shadow: inset 0 2px 10px rgba(0, 0, 0, 0.2);
            overflow-y: auto;
            /* Enable vertical scroll */
        }

        .typing-area:focus {
            border-color: var(--teal-glow);
            background: rgba(255, 255, 255, 0.08);
            box-shadow: 0 0 20px rgba(78, 205, 196, 0.1);
        }

        .release-btn {
            width: 100%;
            padding: 20px;
            margin-top: 30px;
            background: linear-gradient(135deg, var(--teal-glow) 0%, #2a9d8f 100%);
            color: var(--deep-space);
            font-weight: 700;
            border: none;
            border-radius: 16px;
            font-size: 1.2rem;
            cursor: pointer;
            transition: 0.3s;
            display: flex;
            justify-content: center;
            align-items: center;
            gap: 10px;
        }

        .release-btn:hover {
            transform: translateY(-3px);
            box-shadow: 0 10px 30px rgba(78, 205, 196, 0.3);
        }

        /* Animation class for JS */
        .flying-away {
            animation: flyAway 1.5s forwards ease-in-out;
            pointer-events: none;
        }

        @keyframes flyAway {
            0% {
                transform: scale(1) translateY(0);
                opacity: 1;
            }

            50% {
                transform: scale(0.9) translateY(10px);
                opacity: 0.8;
            }

            100% {
                transform: scale(0.2) translateY(-800px);
                opacity: 0;
            }
        }

        /* --- SUCCESS OVERLAY --- */
        .success-overlay {
            position: absolute;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            background: #0f172a;
            z-index: 20;
            display: none;
            flex-direction: column;
            align-items: center;
            justify-content: center;
            text-align: center;
            padding: 40px;
            animation: fadeIn 0.6s ease-out;
        }

        /* Promises Grid */
        .promises-grid {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(150px, 1fr));
            gap: 20px;
            margin-bottom: 100px;
        }

        .promise-item {
            background: rgba(255, 255, 255, 0.02);
            border: 1px solid var(--border-glass);
            padding: 25px;
            border-radius: 16px;
            text-align: center;
            transition: 0.3s;
        }

        .promise-item:hover {
            background: rgba(255, 255, 255, 0.05);
        }

        .promise-icon {
            font-size: 2rem;
            margin-bottom: 10px;
            display: block;
        }

        .promise-label {
            font-size: 1rem;
            font-weight: 600;
            color: white;
            margin-bottom: 5px;
        }

        .promise-sub {
            font-size: 0.8rem;
            opacity: 0.6;
        }

        @media(max-width: 850px) {
            .hero h1 {
                font-size: 2.5rem;
                /* Smaller for mobile */
            }

            .container {
                padding: 100px 20px 50px;
                /* Reduced top padding */
            }

            .stats-bar {
                grid-template-columns: 1fr;
                gap: 30px;
                padding: 20px;
            }

            .stat-item {
                border-right: none;
                border-bottom: 1px solid var(--border-glass);
                padding-bottom: 20px;
            }

            .portal-wrapper {
                grid-template-columns: 1fr;
            }

            .form-panel {
                padding: 25px;
                /* Reduced internal padding */
            }

            .guidelines-panel {
                display: none;
            }
        }
    </style>
    <link rel="icon" href="./assets/images/favicon_symbol.png" type="image/x-icon">
</head>

<body>

    <!-- AUDIO (Fixed) -->
    <audio id="ambientAudio" loop>
        <source src="https://cdn.pixabay.com/download/audio/2022/05/27/audio_1808fbf07a.mp3" type="audio/mp3">
    </audio>

    <!-- UI: AUDIO CONTROL (Fixed) -->
    <div class="audio-control" onclick="toggleAudio()">
        <div class="audio-bars" id="audioVisualizer">
            <div class="bar"></div>
            <div class="bar"></div>
            <div class="bar"></div>
        </div>
        <span id="audioText">Play Audio</span>
    </div>

    <!-- BACKGROUND ATMOSPHERE (Fixed) -->
    <div id="atmosphere">
        <!-- JS will populate floating thoughts here -->
    </div>

    <!-- APP SHELL START -->
    <div id="app-shell">
        <div id="shell-fixed">
            <header class="island-nav"></header>
        </div>

        <main id="shell-content" class="page-wrapper">
            <div class="container">

                <!-- HERO -->
                <section class="hero fade-in">
                    <div class="planet-icon">ü™ê</div>
                    <h1>The Weightless Room</h1>

                    <div class="footer-socials">
                        <a href="https://www.instagram.com/soulamore_/" target="_blank"><i
                                class="fab fa-instagram"></i></a>
                        <a href="https://www.linkedin.com/company/soulamore/" target="_blank"><i
                                class="fab fa-linkedin"></i></a>
                        <a href="https://www.facebook.com/share/1LihokP4wQ/?mibextid=wwXIfr" target="_blank"><i
                                class="fab fa-facebook"></i></a>
                    </div>
                    <p>Some things are too heavy to carry, but too personal to speak out loud.<br>Leave them here. Let
                        them
                        go.</p>
                </section>

                <!-- STATS BAR -->
                <div class="stats-bar fade-in">
                    <div class="stat-item">
                        <span class="stat-num" id="count1">0</span>
                        <div class="stat-label">Stories Shared</div>
                    </div>
                    <div class="stat-item">
                        <span class="stat-num" id="count2">0</span>
                        <div class="stat-label">Confessions Today</div>
                    </div>
                    <div class="stat-item">
                        <span class="stat-num" id="count3">0</span>
                        <div class="stat-label">Communities Active</div>
                    </div>
                </div>

                <!-- TICKER -->
                <div class="ticker-wrap fade-in">
                    <div class="ticker">
                        <span class="ticker-item">#ExamStress</span>
                        <span class="ticker-item">#SecretCrush</span>
                        <span class="ticker-item">#FamilyPressure</span>
                        <span class="ticker-item">#FeelingLost</span>
                        <span class="ticker-item">#Gratitude</span>
                        <span class="ticker-item">#Loneliness</span>
                        <span class="ticker-item">#Hope</span>
                        <span class="ticker-item">#AcademicValidation</span>
                        <!-- Duplicate for seamless scroll -->
                        <span class="ticker-item">#ExamStress</span>
                        <span class="ticker-item">#SecretCrush</span>
                        <span class="ticker-item">#FamilyPressure</span>
                        <span class="ticker-item">#FeelingLost</span>
                    </div>
                </div>

                <!-- HOW IT WORKS -->
                <div class="section-header fade-in">
                    <h2>How it works</h2>
                    <p style="opacity: 0.6;">Three steps to healing.</p>
                </div>

                <div class="steps-grid fade-in">
                    <div class="step-card">
                        <div class="step-num">01</div>
                        <div class="step-title">Share Anonymously</div>
                        <p class="subtitle fade-in">Sometimes, the heaviest things we carry are the words we never say.
                        </p>

                        <!-- Dynamic Count -->
                        <div class="live-pill"
                            style="position: relative; top: 0; left: 0; transform: none; display: inline-flex; margin-top: 15px; background: rgba(255,255,255,0.05); border: none;">
                            <div class="live-dot"
                                style="background: var(--peach-glow); box-shadow: 0 0 10px var(--peach-glow);"></div>
                            <span class="live-count-display">Connecting to the void...</span>
                        </div>
                        <p class="step-desc">Open the door to healing. Fill out our simple form and let the weight of
                            your
                            thoughts find solace here.</p>
                    </div>
                    <div class="step-card">
                        <div class="step-num">02</div>
                        <div class="step-title">Optional Connection</div>
                        <p class="step-desc">If you'd like, provide an email for peer recommendations. But remember,
                            it's
                            entirely optional.</p>
                    </div>
                    <div class="step-card">
                        <div class="step-num">03</div>
                        <div class="step-title">Engage & Empower</div>
                        <p class="step-desc">Your story is posted (anonymously) to receive empathetic echoes and diverse
                            perspectives.</p>
                    </div>
                </div>

                <!-- THE PORTAL (FORM) -->
                <div class="section-header fade-in">
                    <h2>Share Your Story</h2>
                    <div style="margin-top:10px;">
                        <a href="confession-box/guidelines.html"
                            style="color:var(--teal-glow); font-size:0.9rem; text-decoration:underline;">Read Community
                            Guidelines</a> before posting.
                    </div>
                </div>

                <div class="portal-wrapper fade-in" id="portal">

                    <!-- LEFT: GUIDELINES -->
                    <div class="guidelines-panel">
                        <h3 style="margin-bottom: 30px; color: white;">Community Guidelines</h3>

                        <div class="guideline-item">
                            <div class="g-icon"><i class="fas fa-hands-holding-circle"></i></div>
                            <div class="g-text"><strong>Respect</strong><span>Treat others' stories with the respect
                                    you'd
                                    want for yours.</span></div>
                        </div>
                        <div class="guideline-item">
                            <div class="g-icon"><i class="fas fa-user-secret"></i></div>
                            <div class="g-text"><strong>Anonymity</strong><span>Avoid details that compromise
                                    identity.</span></div>
                        </div>
                        <div class="guideline-item">
                            <div class="g-icon"><i class="fas fa-heart"></i></div>
                            <div class="g-text"><strong>Support</strong><span>Be supportive. We lift each other
                                    up.</span>
                            </div>
                        </div>

                        <div
                            style="margin-top: 40px; font-size: 0.85rem; opacity: 0.6; border-top: 1px solid var(--border-glass); padding-top: 20px;">
                            <i class="fas fa-shield-alt"></i> All posts are reviewed before publishing.
                        </div>
                    </div>

                    <!-- RIGHT: FORM -->
                    <div class="form-panel">
                        <div id="formContent">
                            <form id="confessionForm" onsubmit="event.preventDefault(); submitConfession();">
                                <textarea id="confessionText" class="typing-area"
                                    placeholder="Start typing here... No one knows it's you." required></textarea>

                                <div
                                    style="display: grid; grid-template-columns: 1fr 1fr; gap: 15px; margin-top: 20px;">
                                    <input type="email" id="confessionEmail" placeholder="Email (Optional)"
                                        style="background:transparent; border:1px solid var(--border-glass); padding:12px; border-radius:8px; color:white; width:100%;">
                                    <input type="tel" id="confessionPhone" placeholder="Phone (Optional)"
                                        style="background:transparent; border:1px solid var(--border-glass); padding:12px; border-radius:8px; color:white; width:100%;">
                                </div>

                                <button type="submit" class="release-btn" id="confessionSubmitBtn">
                                    Release to the Universe <i class="fas fa-paper-plane"></i>
                                </button>
                            </form>
                        </div>

                        <!-- SUCCESS UPSELL -->
                        <div id="successState" class="success-overlay">
                            <i class="fas fa-check-circle"
                                style="font-size: 4rem; color: var(--teal-glow); margin-bottom: 20px;"></i>
                            <h2 style="color: white; margin-bottom: 10px;">Released.</h2>
                            <p style="opacity: 0.8; margin-bottom: 30px;">
                                Your story is safe with us. <br>While we review it, don't stop your healing journey
                                here.
                            </p>
                            <h3 style="font-size: 0.9rem; color: var(--peach-glow); text-transform: uppercase;">Connect
                                Now
                            </h3>

                            <div class="next-steps">
                                <a href="forum.html" class="next-card">
                                    <i class="fas fa-users"
                                        style="font-size: 2rem; color: var(--teal-glow); margin-bottom: 10px; display:block;"></i>
                                    <div style="font-weight: 600; color:white;">Meet a Peer</div>
                                    <div style="font-size: 0.8rem; opacity: 0.6; color:white;">Talk to a student
                                        listener.
                                    </div>
                                </a>
                                <a href="../../spaces/campus/index.html" class="next-card">
                                    <i class="fas fa-graduation-cap"></i>
                                    <span>Soulamore Campus</span>
                                </a>
                            </div>
                            <button onclick="location.reload()"
                                style="background:none; border:none; color: #64748b; margin-top: 30px; cursor: pointer; text-decoration: underline;">Write
                                another</button>
                        </div>
                    </div>
                </div>

                <!-- WE PROMISE -->
                <div class="section-header fade-in">
                    <h2>We Promise</h2>
                </div>
                <div class="promises-grid fade-in">
                    <div class="promise-item">
                        <span class="promise-icon">üîí</span>
                        <div class="promise-label">Privacy</div>
                        <div class="promise-sub">Identity safe</div>
                    </div>
                    <div class="promise-item">
                        <span class="promise-icon">üíô</span>
                        <div class="promise-label">Empathy</div>
                        <div class="promise-sub">Compassion first</div>
                    </div>
                    <div class="promise-item">
                        <span class="promise-icon">üôè</span>
                        <div class="promise-label">Respect</div>
                        <div class="promise-sub">Every story matters</div>
                    </div>
                    <div class="promise-item">
                        <span class="promise-icon">üé≠</span>
                        <div class="promise-label">Anonymity</div>
                        <div class="promise-sub">No real names</div>
                    </div>
                    <div class="promise-item">
                        <span class="promise-icon">üåü</span>
                        <div class="promise-label">No Judgment</div>
                        <div class="promise-sub">Acceptance reigns</div>
                    </div>
                </div>

            </div>
        </main>

        <!-- GLOBAL FOOTER -->

        <!-- STANDARDIZED FOOTER -->
        <footer></footer>

        <script src="../../assets/js/components.js"></script>
        <script src="../../assets/js/main.js"></script>
        <script>
            // --- FLOATING THOUGHTS GENERATOR ---
            const thoughts = ["Loneliness", "Hope", "Stress", "Exams", "Family", "Secret", "Fear", "Dream", "Love", "Anxiety", "Future", "Regret", "Silence", "Noise", "Validation"];
            const atmosphere = document.getElementById('atmosphere');

            function createThought() {
                if (!atmosphere) return;
                const el = document.createElement('div');
                el.classList.add('thought-bubble');
                el.innerText = thoughts[Math.floor(Math.random() * thoughts.length)];

                // Random positioning and sizing
                el.style.left = Math.random() * 90 + 'vw';
                // Increase visibility by adjusting size range
                el.style.fontSize = (Math.random() * 1.5 + 1) + 'rem';
                el.style.animationDuration = (Math.random() * 10 + 15) + 's'; // Slow float (15-25s)

                atmosphere.appendChild(el);
                setTimeout(() => { el.remove(); }, 25000);
            }

            // Initialize bubbles
            setInterval(createThought, 1500);

            <!-- AUDIO LOGIC -->
        </script>
        <script>
            const audio = document.getElementById('ambientAudio');
            const visualizer = document.getElementById('audioVisualizer');
            const audioText = document.getElementById('audioText');
            const control = document.querySelector('.audio-control');
            let isPlaying = false;

            function toggleAudio() {
                if (!isPlaying) {
                    audio.play();
                    control.classList.add('playing');
                    audioText.innerText = "Pause Audio";
                } else {
                    audio.pause();
                    control.classList.remove('playing');
                    audioText.innerText = "Play Audio";
                }
                isPlaying = !isPlaying;
            }

            // --- MODULE: Backend ---
        </script>
        <script type="module" src="../../assets/js/firebase-config.js"></script>
        <script type="module" src="../../assets/js/data-handler.js"></script>

        <script>
            // --- CONFESSION SUBMISSION ---
            function submitConfession() {
                const text = document.getElementById('confessionText').value;
                const email = document.getElementById('confessionEmail').value;
                const phone = document.getElementById('confessionPhone').value;
                const btn = document.getElementById('confessionSubmitBtn');

                if (text.length < 5) return;

                btn.innerHTML = '<i class="fas fa-spinner fa-spin"></i> Releasing...';
                btn.disabled = true;

                if (window.SoulBackend && window.SoulBackend.submitConfession) {
                    window.SoulBackend.submitConfession(text, email, phone).then(success => {
                        if (success) {
                            // Success Animation logic from original script
                            showSuccessState();
                        } else {
                            btn.innerHTML = 'Error. Try Again.';
                            btn.disabled = false;
                        }
                    });
                } else {
                    console.error("Backend not loaded");
                }
            }

            function showSuccessState() {
                const formContent = document.getElementById('formContent'); // Using formContent wrapper
                const successOverlay = document.getElementById('successState');

                // Add flying animation
                formContent.classList.add('flying-away');

                // Wait for animation to finish then show success
                setTimeout(() => {
                    formContent.style.display = 'none';
                    formContent.classList.remove('flying-away');
                    successOverlay.style.display = 'flex';

                    // Fade in success overlay
                    setTimeout(() => {
                        successOverlay.style.opacity = '1';
                        successOverlay.style.transform = 'scale(1)';
                        createStars();
                    }, 50);
                }, 1000);
            }

            // --- BACKGROUND THOUGHTS ---
            // (Existing logic preserved if needed, or simplified)
            function createStars() {
                // ... simple confetti logic
            }

            // --- STATS COUNT UP ---
            function animateValue(id, start, end, duration) {
                let startTimestamp = null;
                const step = (timestamp) => {
                    if (!startTimestamp) startTimestamp = timestamp;
                    const progress = Math.min((timestamp - startTimestamp) / duration, 1);
                    const el = document.getElementById(id);
                    if (el) el.innerHTML = Math.floor(progress * (end - start) + start);
                    if (progress < 1) window.requestAnimationFrame(step);
                };
                window.requestAnimationFrame(step);
            }

            const observer = new IntersectionObserver((entries) => {
                entries.forEach(entry => {
                    if (entry.isIntersecting) {
                        animateValue("count1", 0, 1248, 2000);
                        animateValue("count2", 0, 42, 2000);
                        animateValue("count3", 0, 15, 2000);
                        observer.disconnect();
                    }
                });
            });
            const stats = document.querySelector('.stats-bar');
            if (stats) observer.observe(stats);



            // --- FADE IN ---
            const fadeObserver = new IntersectionObserver((entries) => {
                entries.forEach(entry => {
                    if (entry.isIntersecting) {
                        entry.target.style.opacity = 1;
                        entry.target.style.transform = "translateY(0)";
                    }
                });
            });
            document.querySelectorAll('.fade-in').forEach(el => fadeObserver.observe(el));
        </script>

    </div> <!-- End container -->
    </main>

    <footer></footer>
    </div> <!-- End app-shell -->

    <script src="../../assets/js/soulbot-beta.js"></script>
    <script src="../../assets/js/launch-popup.js"></script>
</body>

</html>